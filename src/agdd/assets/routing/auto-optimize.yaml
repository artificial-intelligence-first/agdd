name: "auto-optimize"
description: "Auto-optimization routing policy with adaptive strategies"

routes:
  # Offer orchestration with full optimization
  - task_type: "offer-orchestration"
    provider: "anthropic"
    model: "claude-3-5-sonnet-20241022"
    use_batch: true
    use_cache: true
    structured_output: true
    moderation: true
    priority: 100
    metadata:
      max_tokens: 4096
      temperature: 0.7
      batch_window: "12h"
      cache_ttl: 3600

  # Pattern-based routing for offer generation
  - task_type: "offer.generate"
    provider: "anthropic"
    model: "claude-3-5-sonnet-20241022"
    use_batch: true
    use_cache: true
    structured_output: true
    moderation: true
    priority: 90
    metadata:
      max_tokens: 4096
      temperature: 0.7
      batch_window: "12h"
      cache_ttl: 3600

  # Adaptive routing based on task complexity
  - task_type: "*.complex"
    provider: "anthropic"
    model: "claude-3-5-sonnet-20241022"
    use_batch: false
    use_cache: true
    structured_output: true
    moderation: true
    priority: 80
    metadata:
      max_tokens: 8192
      temperature: 0.6

  # Fast tasks use smaller model
  - task_type: "*.simple"
    provider: "anthropic"
    model: "claude-3-5-haiku-20241022"
    use_batch: true
    use_cache: true
    structured_output: true
    moderation: false
    priority: 70
    metadata:
      max_tokens: 2048
      temperature: 0.5
      batch_window: "24h"

  # Default fallback with moderate optimization
  - task_type: "*"
    provider: "anthropic"
    model: "claude-3-5-sonnet-20241022"
    use_batch: true
    use_cache: true
    structured_output: false
    moderation: false
    priority: 0
    metadata:
      max_tokens: 2048
      temperature: 0.5
      batch_window: "24h"
      cache_ttl: 1800
