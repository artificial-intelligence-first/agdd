{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agdd.ai/schemas/skills/doc-gen/output.schema.json",
  "title": "DocGenOutput",
  "description": "Output from document generation skill (offer packet)",
  "type": "object",
  "required": ["offer_id", "generated_at", "candidate", "compensation", "narrative"],
  "properties": {
    "offer_id": {
      "type": "string",
      "description": "Unique offer identifier"
    },
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when offer was generated"
    },
    "candidate": {
      "type": "object",
      "description": "Normalized candidate information",
      "required": ["id", "name", "role"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Candidate identifier"
        },
        "name": {
          "type": "string",
          "description": "Candidate's name"
        },
        "role": {
          "type": "string",
          "description": "Job role"
        },
        "level": {
          "type": ["string", "null"],
          "description": "Seniority level"
        },
        "location": {
          "type": ["string", "null"],
          "description": "Location"
        }
      },
      "additionalProperties": false
    },
    "compensation": {
      "type": "object",
      "description": "Compensation details",
      "required": ["components"],
      "properties": {
        "components": {
          "type": "object",
          "description": "Compensation components",
          "properties": {
            "base": {
              "type": "object",
              "properties": {
                "amount": {
                  "type": "number"
                },
                "currency": {
                  "type": "string"
                }
              },
              "required": ["amount", "currency"]
            },
            "ceiling": {
              "type": "object",
              "properties": {
                "amount": {
                  "type": "number"
                },
                "currency": {
                  "type": "string"
                }
              },
              "required": ["amount", "currency"]
            },
            "variable": {
              "type": ["object", "number"],
              "description": "Variable compensation"
            },
            "equity": {
              "type": ["object", "number"],
              "description": "Equity compensation"
            },
            "recommendation": {
              "type": "string",
              "description": "Compensation recommendation text"
            }
          },
          "additionalProperties": false
        },
        "source": {
          "type": ["string", "null"],
          "description": "Data source for compensation"
        }
      },
      "additionalProperties": false
    },
    "narrative": {
      "type": "object",
      "description": "Narrative sections for the offer",
      "required": ["summary", "talking_points"],
      "properties": {
        "summary": {
          "type": "string",
          "description": "Executive summary of the offer"
        },
        "talking_points": {
          "type": "string",
          "description": "Key talking points for discussions"
        }
      },
      "additionalProperties": false
    },
    "warnings": {
      "type": "array",
      "description": "Warning messages about missing or incomplete data",
      "items": {
        "type": "string"
      }
    },
    "provenance": {
      "type": "object",
      "description": "Metadata about data sources and processing",
      "properties": {
        "schemas": {
          "type": "object",
          "properties": {
            "input": {
              "type": "string"
            },
            "output": {
              "type": "string"
            }
          }
        },
        "inputs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
